# 秒记 - 极简记账软件

# 解决什么问题？

- 其他记账软件过于繁琐，还有广告，用户体验不好，希望有个极简记账的软件
- 能让用户能够知道自己的月度收支情况



# UI 设计

- 总体风格是「极简」风+高级感，参考Typora的设计感觉。

![image-20260130230254679](/Users/beneychen/Dev/ledger-light/assets:/image-20260130230254679.png)

- 色调可以多种色彩，参考iOS的Reminders，但是不需要颜色渐变，纯色就好。总之能简洁就简洁。

<img src="/Users/beneychen/Dev/ledger-light/assets:/Screenshot 2026-01-30 at 23.10.30.png" alt="Screenshot 2026-01-30 at 23.10.30" style="zoom:15%;" />

- 总体用起来的感觉，就是原生iOS软件的感觉，仍然是参考iOS Reminder的设计。
- 过渡动作也是需要非常简单直接，感觉很丝滑。

# UX 设计

最终目的是，用户能够清晰地知道当前月的收支情况，并能够通过饼图、柱状图直观分析。

## 结果导出

- Excel或者CSV表格。

- P1 - 和[飞书多维表格](https://open.feishu.cn/document/client-docs/intro)连通起来，这样用户能够在飞书多维表格上分析数据，比如作图等。



## 支持语言

中文。

P1 - 未来有需要，可以支持英语。需要考虑这个拓展性。



## 账本

以账本为模块记账。用户可以设置默认账本，这样之后打开APP就直接进入该账本的记账。

背后其实有一个大账本，是所有这些账本的集合，可以用作总体分析。



每一个账本内，能够看图表分析：

1. 甜甜圈图，按照标签划分占比
2. 时间线柱状图

图表默认时间窗口都是当前自然月，可选项有：年 月 周



## 主页

展示当前默认账本的记录，包含：

- 当前月的所有记录，
- 总支出，
- 总收入



## 记账流

一个页面，让用户完成：

- 选标签，选支出或者收入（默认支出），输入金额，输入备注（二级标签，非必填）

- 日期默认就是当前日期YYYY/MM/DD，但用户可以修改日期。日期会显示星期几。

- 然后确认，或者取消。

- 接着记账页自动关闭，回到当前账本页。



## 用户打开APP

- 默认不进入主页，而是直接进入记账流



## 其他注意点：

所有的按钮，尽量都在手机底部，方便拇指直接触达。

能用手势的地方，就不用按钮。

总之这个软件的设计理念就是，极简。



## 数据导出

当前只需要能够导出csv表格，

P1 - 下个阶段需要支持，导出到飞书多维表格。

---

# 技术实现设计

## 技术栈选型

| 类别 | 选型 | 说明 |
|------|------|------|
| 平台 | iOS 17+ | 使用最新SwiftUI特性 |
| UI框架 | SwiftUI | 原生声明式UI，极简实现 |
| 数据持久化 | SwiftData | Apple最新ORM框架 |
| 图表 | Swift Charts | 原生图表框架 |
| 架构 | MVVM | 状态驱动的响应式架构 |

## 项目结构

```
LedgerLight/
├── LedgerLightApp.swift          # App入口
├── Info.plist                    # 配置文件
├── Assets.xcassets/              # 资源文件
├── Models/
│   ├── Models.swift              # 数据模型 (Tag, Record, Ledger)
│   └── AppState.swift            # 全局状态管理
└── Views/
    ├── ContentView.swift         # 主入口视图
    ├── MainTabView.swift         # Tab导航 + 主页
    ├── AddRecordView.swift       # 记账流页面
    ├── ChartView.swift           # 图表分析页面
    ├── LedgerListView.swift      # 账本管理页面
    └── SettingsView.swift        # 设置页面
```

## 数据模型设计

### Tag (标签)
```swift
@Model
class Tag {
    var id: UUID
    var name: String           // 标签名称
    var colorHex: String       // 颜色值
    var icon: String           // SF Symbol图标名
    var isDefault: Bool        // 是否为默认标签
    var records: [Record]?     // 关联的记录
}
```

### Record (记录)
```swift
@Model
class Record {
    var id: UUID
    var amount: Double         // 金额
    var type: RecordType       // 支出/收入
    var note: String           // 备注
    var date: Date             // 记录日期
    var createdAt: Date        // 创建时间
    var tag: Tag?              // 所属标签
    var ledger: Ledger?        // 所属账本
}

enum RecordType: String, Codable {
    case expense = "支出"
    case income = "收入"
}
```

### Ledger (账本)
```swift
@Model
class Ledger {
    var id: UUID
    var name: String           // 账本名称
    var colorHex: String       // 主题色
    var icon: String           // 图标
    var isDefault: Bool        // 是否为默认账本
    var records: [Record]?     // 包含的记录
}
```

## 核心页面设计

### 1. 记账流 (AddRecordView)

**设计理念：** 一个页面完成所有输入，极简高效

```
┌─────────────────────────────────┐
│          ¥ 128.50               │  ← 大字显示金额
│       ──────────────            │
│      [支出]  [收入]             │  ← 类型切换
├─────────────────────────────────┤
│  🍜餐饮  🚗交通  🛍购物  🎮娱乐  │  ← 横向滚动标签
│  🏠居住  🏥医疗  📚教育  💰工资  │
├─────────────────────────────────┤
│  📅 1/31 周五     备注（选填）  │  ← 日期+备注
├─────────────────────────────────┤
│   7   8   9   +                 │
│   4   5   6   -                 │  ← 自定义数字键盘
│   1   2   3   ⌫                │     支持简单计算
│   .   0  完成  =                │
└─────────────────────────────────┘
```

**特性：**
- 自定义数字键盘，支持加减计算
- 标签横向滚动，一键选择
- 日期默认今天，可修改
- 丝滑的动画过渡
- 触感反馈增强体验

### 2. 主页 (HomeView)

```
┌─────────────────────────────────┐
│  ◀ 2026年1月 ▶              +   │  ← 月份切换
├─────────────────────────────────┤
│  支出        收入       结余    │
│  ¥3,280     ¥8,000    ¥4,720   │  ← 月度概览卡片
├─────────────────────────────────┤
│  1/31 周五                      │
│  ┌────┐ 餐饮              -¥35  │
│  │ 🍜 │ 午餐                    │
│  └────┘                         │
│  ┌────┐ 交通              -¥15  │
│  │ 🚗 │ 地铁                    │
│  └────┘                         │
│  ─────────────────────────────  │
│  1/30 周四                      │
│  ...                            │
└─────────────────────────────────┘
```

**特性：**
- 按日期分组显示记录
- 左滑删除记录
- 下拉切换月份

### 3. 分析页 (ChartView)

```
┌─────────────────────────────────┐
│           分析                   │
├─────────────────────────────────┤
│      [周]  [月]  [年]           │  ← 时间窗口选择
│      [分类]     [趋势]          │  ← 图表类型切换
├─────────────────────────────────┤
│        ╭────────╮               │
│       ╱  总支出  ╲              │
│      │  ¥3,280   │             │  ← 甜甜圈图
│       ╲          ╱              │
│        ╰────────╯               │
├─────────────────────────────────┤
│  ● 餐饮     ¥1,200    36.6%    │
│  ● 交通     ¥800      24.4%    │  ← 分类明细
│  ● 购物     ¥650      19.8%    │
│  ● 娱乐     ¥630      19.2%    │
└─────────────────────────────────┘
```

### 4. 设置页 (SettingsView)

- 数据概览统计
- 标签管理（增删改）
- CSV数据导出
- 版本信息

## 交互设计

### 手势优先

| 操作 | 手势 |
|------|------|
| 删除记录 | 左滑 |
| 关闭弹窗 | 下拉 |
| 切换月份 | 点击箭头 |
| 选择标签 | 点击 |

### 触感反馈

- 数字键盘按键：轻触感
- 保存成功：中等触感
- 选择标签：选择触感

### 动画

- 所有过渡使用 `withAnimation(.easeInOut)`
- Sheet弹出使用系统默认动画
- 列表项使用隐式动画

## 数据导出

### CSV格式
```csv
日期,时间,类型,标签,金额,备注,账本
2026-01-31,14:30:00,支出,餐饮,35.00,午餐,日常账本
2026-01-31,08:15:00,支出,交通,15.00,地铁,日常账本
```

### 导出流程
1. 点击"导出为CSV"
2. 生成UTF-8编码文件（含BOM）
3. 调用系统分享Sheet
4. 用户选择保存位置或分享方式

## 默认数据

### 预设标签
| 名称 | 图标 | 颜色 |
|------|------|------|
| 餐饮 | fork.knife | #FF6B6B |
| 交通 | car.fill | #007AFF |
| 购物 | bag.fill | #FF9500 |
| 娱乐 | gamecontroller.fill | #AF52DE |
| 居住 | house.fill | #34C759 |
| 医疗 | cross.case.fill | #FF2D55 |
| 教育 | book.fill | #5AC8FA |
| 工资 | briefcase.fill | #34C759 |
| 其他 | ellipsis.circle.fill | #8E8E93 |

### 预设颜色板
- 天蓝 #007AFF
- 薄荷 #34C759
- 珊瑚 #FF6B6B
- 琥珀 #FF9500
- 紫罗兰 #AF52DE
- 粉红 #FF2D55
- 青色 #5AC8FA
- 灰色 #8E8E93

## 扩展性设计

### 多语言支持 (P1)
- 使用 `LocalizedStringKey` 
- 所有文本提取为常量
- 预留 `Localizable.strings`

### 飞书集成 (P1)
- 预留 `FeishuExporter` 协议
- 使用飞书开放API
- OAuth认证流程

## 运行要求

- iOS 17.0+
- Xcode 15.0+
- Swift 5.9+

## 构建说明

1. 用Xcode打开项目
2. 选择目标设备/模拟器
3. Command + R 运行

或使用命令行：
```bash
xcodebuild -scheme LedgerLight -destination 'platform=iOS Simulator,name=iPhone 15'
```